---
Test
---
OnlineLottery

!define COMMAND_PATTERN {%m -r fitnesse.fitserver.FitServer,dotnet2\fit.dll %p}
!define TEST_RUNNER {dotnet2\Runner.exe}
!path ${RootPath}\OnlineLottery\bin\Release\OnlineLottery.dll

!|import|
|OnlineLottery.Test.PurchaseTicket|

|Set Up Test Environment|
|Create Draw|
|01.01.2017|

|Player Registers|
|Username|Password|Name|Address|City|Postcode|Country|Player Id?|
|john|test123|John Smith|44 Ranelagh Way|London|NN1EE1|UK|>>player|

!3 When there is not enough money in the account, the ticket purchase should be refused. The ticket should not be registered, account balance and pool value remain untouched.

|Purchase Ticket|
|Player|john|Deposits|50|dollars with card|4111111111111111|and expiry date|01/18|
|reject|Player|john|buys|10|tickets with numbers|1,3,4,5,8,10| for draw on|01.01.2017|
|Check|Pool value for draw on|01.01.2017|is|0|
|Check|Account balance for|john|is|50|
|not|Ticket with numbers|1,3,4,5,8,10|for|100|dollars is registered for player|john|for draw on|01.01.2017|